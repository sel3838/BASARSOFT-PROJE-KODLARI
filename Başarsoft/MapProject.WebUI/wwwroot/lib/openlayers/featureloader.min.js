import{VOID}from"./functions.js";let withCredentials=!1;function loadFeaturesXhr(e,r,n,t,s,o,a){const i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(n,t,s):e,!0),"arraybuffer"==r.getType()&&(i.responseType="arraybuffer"),i.withCredentials=withCredentials,i.onload=function(e){if(!i.status||200<=i.status&&i.status<300){var t=r.getType();try{let e;"text"==t||"json"==t?e=i.responseText:"xml"==t?e=i.responseXML||i.responseText:"arraybuffer"==t&&(e=i.response),e?o(r.readFeatures(e,{extent:n,featureProjection:s}),r.readProjection(e)):a()}catch{a()}}else a()},i.onerror=a,i.send()}function xhr(a,i){return function(e,t,r,n,s){const o=this;loadFeaturesXhr(a,i,e,t,r,function(e,t){o.addFeatures(e),void 0!==n&&n(e)},s||VOID)}}function setWithCredentials(e){withCredentials=e}export{loadFeaturesXhr,xhr,setWithCredentials};