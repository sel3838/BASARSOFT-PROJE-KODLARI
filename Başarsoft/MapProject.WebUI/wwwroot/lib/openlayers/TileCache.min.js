import LRUCache from"./structs/LRUCache.js";import{fromKey,getKey}from"./tilecoord.js";class TileCache extends LRUCache{clear(){for(;0<this.getCount();)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache();){const t=this.peekLast();if(t.getKey()in e)break;this.pop().release()}}pruneExceptNewestZ(){if(0!==this.getCount()){var e=this.peekFirstKey();const t=fromKey(e)[0];this.forEach(e=>{e.tileCoord[0]!==t&&(this.remove(getKey(e.tileCoord)),e.release())})}}}export default TileCache;