import TileGrid from"./tilegrid/TileGrid.js";import{DEFAULT_MAX_ZOOM,DEFAULT_TILE_SIZE}from"./tilegrid/common.js";import{METERS_PER_UNIT,get as getProjection}from"./proj.js";import{containsCoordinate,createOrUpdate,getCorner,getHeight,getWidth}from"./extent.js";import{toSize}from"./size.js";export{default as WMTS}from"./tilegrid/WMTS.js";function getForProjection(e){let t=e.getDefaultTileGrid();return t||(t=createForProjection(e),e.setDefaultTileGrid(t)),t}function wrapX(e,t,o){var r=t[0];const i=e.getTileCoordCenter(t);var o=extentFromProjection(o);return containsCoordinate(o,i)?t:(t=getWidth(o),o=Math.ceil((o[0]-i[0])/t),i[0]+=t*o,e.getTileCoordForCoordAndZ(i,r))}function createForExtent(e,t,o,r){r=void 0!==r?r:"top-left";t=resolutionsFromExtent(e,t,o);return new TileGrid({extent:e,origin:getCorner(e,r),resolutions:t,tileSize:o})}function createXYZ(e){var e=e||{},t=e.extent||getProjection("EPSG:3857").getExtent(),t={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(t)}function resolutionsFromExtent(e,t,o,r){t=void 0!==t?t:DEFAULT_MAX_ZOOM,o=toSize(void 0!==o?o:DEFAULT_TILE_SIZE);var i=getHeight(e),e=getWidth(e),n=(r=0<r?r:Math.max(e/o[0],i/o[1]),t+1);const c=new Array(n);for(let e=0;e<n;++e)c[e]=r/Math.pow(2,e);return c}function createForProjection(e,t,o,r){return createForExtent(extentFromProjection(e),t,o,r)}function extentFromProjection(e){let t=(e=getProjection(e)).getExtent();return t||(e=180*METERS_PER_UNIT.degrees/e.getMetersPerUnit(),t=createOrUpdate(-e,-e,e,e)),t}export{TileGrid,getForProjection,wrapX,createForExtent,createXYZ,createForProjection,extentFromProjection};