import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";import{FALSE}from"../functions.js";class PinchZoom extends PointerInteraction{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=FALSE),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;var n=this.targetPointers[0],i=this.targetPointers[1],s=n.clientX-i.clientX,n=n.clientY-i.clientY,i=Math.sqrt(s*s+n*n);void 0!==this.lastDistance_&&(e=this.lastDistance_/i),this.lastDistance_=i;const o=t.map,r=o.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(centroidFromPointers(this.targetPointers))),o.render(),r.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map,n=e.getView();t=1<this.lastScaleDelta_?1:-1;return n.endInteraction(this.duration_,t),!1}return!0}handleDownEvent(t){if(2<=this.targetPointers.length){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}export default PinchZoom;