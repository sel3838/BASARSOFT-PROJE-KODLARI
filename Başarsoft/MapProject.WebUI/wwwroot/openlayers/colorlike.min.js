import ImageState from"./ImageState.js";import{createCanvasContext2D}from"./dom.js";import{get as getIconImage}from"./style/IconImage.js";import{shared as iconCache}from"./style/IconImageCache.js";import{toString}from"./color.js";function asColorLike(e){return e?Array.isArray(e)?toString(e):"object"==typeof e&&"src"in e?asCanvasPattern(e):e:null}function asCanvasPattern(e){if(!e.offset||!e.size)return iconCache.getPattern(e.src,"anonymous",e.color);var t=e.src+":"+e.offset,o=iconCache.getPattern(t,void 0,e.color);if(o)return o;const a=iconCache.get(e.src,"anonymous",null);if(a.getImageState()!==ImageState.LOADED)return null;const r=createCanvasContext2D(e.size[0],e.size[1]);return r.drawImage(a.getImage(1),e.offset[0],e.offset[1],e.size[0],e.size[1],0,0,e.size[0],e.size[1]),getIconImage(r.canvas,t,void 0,ImageState.LOADED,e.color,!0),iconCache.getPattern(t,void 0,e.color)}export{asColorLike};